<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Git & GitHub Command Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for generated command (optional) */
        #generated-command::-webkit-scrollbar {
            height: 8px;
        }
        #generated-command::-webkit-scrollbar-track {
            background: #2d3748; /* gray-800 */
        }
        #generated-command::-webkit-scrollbar-thumb {
            background: #4a5568; /* gray-600 */
            border-radius: 4px;
        }
        #generated-command::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gray-500 */
        }
        /* Ensure textareas are responsive and don't break layout */
        textarea {
            min-height: 80px;
        }
        /* Add a little more space for readability in options */
        .option-item {
            padding-bottom: 0.75rem; /* pb-3 */
            margin-bottom: 0.75rem; /* mb-3 */
            border-bottom: 1px solid #e5e7eb; /* border-gray-200 */
        }
        .option-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .option-label {
            display: block;
            margin-bottom: 0.25rem; /* mb-1 */
            font-weight: 500; /* font-medium */
            color: #374151; /* text-gray-700 */
        }
        .input-field {
            width: 100%;
            padding: 0.5rem; /* p-2 */
            border: 1px solid #D1D5DB; /* border-gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: inset 0 1px 2px 0 rgba(0,0,0,0.05); /* shadow-sm */
        }
        .input-field:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #4F46E5; /* focus:border-indigo-500 */
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.3); /* focus:ring-indigo-500 */
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem; /* space-x-2 */
            color: #374151; /* text-gray-700 */
        }
        .checkbox-input {
            height: 1rem; /* h-4 */
            width: 1rem; /* w-4 */
            border-color: #D1D5DB; /* border-gray-300 */
            border-radius: 0.25rem; /* rounded */
            color: #4F46E5; /* text-indigo-600 */
        }
        .checkbox-input:focus {
             box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.3); /* focus:ring-indigo-500 */
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">

    <header class="bg-gray-800 text-white p-4 shadow-md sticky top-0 z-50">
        <div class="container mx-auto">
            <h1 class="text-2xl md:text-3xl font-bold">Interactive Git & GitHub Command Builder</h1>
        </div>
    </header>

    <div class="container mx-auto flex flex-col md:flex-row mt-4 min-h-[calc(100vh-120px)]">
        <nav id="command-selection-area" class="w-full md:w-1/3 lg:w-1/4 bg-white p-4 md:p-6 shadow-lg rounded-lg md:sticky md:top-24 md:max-h-[calc(100vh-150px)] md:overflow-y-auto">
            <div class="space-y-6">
                <div>
                    <label for="category-select" class="block text-sm font-medium text-gray-700 mb-1">Category:</label>
                    <select id="category-select" class="input-field">
                        <option value="">-- Select Category --</option>
                    </select>
                </div>
                <div>
                    <label for="command-select" class="block text-sm font-medium text-gray-700 mb-1">Command:</label>
                    <select id="command-select" class="input-field">
                        <option value="">-- Select Category First --</option>
                    </select>
                </div>
            </div>
        </nav>

        <main id="command-details-area" class="flex-1 p-4 md:p-6 space-y-6 w-full md:w-2/3 lg:w-3/4">
            <section id="command-info-placeholder" class="p-6 bg-white border border-gray-200 rounded-lg shadow text-center text-gray-500">
                <h2 class="text-xl font-semibold mb-2">Welcome!</h2>
                <p>Select a category and command from the sidebar to get started.</p>
                <p>Command details and options will appear here.</p>
            </section>

            <section id="command-description-container" class="p-4 bg-blue-50 border border-blue-200 rounded-lg shadow-sm hidden">
                <h2 class="text-xl font-semibold text-gray-800 mb-2" id="command-title"></h2>
                <p id="command-description" class="text-sm text-gray-700"></p>
            </section>

            <section id="command-options-container" class="p-6 bg-white border border-gray-200 rounded-lg shadow-sm space-y-4 hidden">
                </section>

            <section id="generated-command-container" class="p-4 bg-white border border-gray-200 rounded-lg shadow-sm hidden sticky bottom-0 md:static">
                <h3 class="text-lg font-medium text-gray-900 mb-2">Generated Command:</h3>
                <div class="relative">
                    <pre id="generated-command" class="bg-gray-900 text-green-400 p-4 rounded-md overflow-x-auto whitespace-pre-wrap break-all min-h-[60px] text-sm md:text-base"></pre>
                    <button id="copy-command-button" title="Copy to Clipboard" class="absolute top-2 right-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-1.5 px-3 rounded-md text-xs md:text-sm transition-colors duration-150 ease-in-out">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                            <path d="M3 5a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2-1a1 1 0 00-1 1v8a1 1 0 001 1h6a1 1 0 001-1V5a1 1 0 00-1-1H5z" />
                        </svg>
                        Copy
                    </button>
                </div>
                <div id="copy-feedback" class="mt-2 text-sm text-green-600 h-5"></div>
            </section>
        </main>
    </div>

    <footer class="bg-gray-700 text-white text-center p-3 text-xs md:text-sm mt-auto">
        Interactive Git & GitHub Command Builder. Use generated commands with understanding.
    </footer>

<script>
const commandsData = {
    "Basic Git": {
        "git init": {
            description: "Initialize a new, empty Git repository in the current directory or a specified one.",
            base: "git init",
            parts: [
                { id: "branchName", type: "text", label: "Initial branch name (-b)", placeholder: "main", template: (val) => val ? `-b ${val}` : "" },
                { id: "directory", type: "text", label: "Directory (optional)", placeholder: "my-new-repo", template: (val) => val ? `${val}` : "" }
            ]
        },
        "git clone": {
            description: "Clone a repository into a new directory.",
            base: "git clone",
            parts: [
                { id: "repoUrl", type: "text", label: "Repository URL", placeholder: "https://github.com/user/repo.git", required: true, template: (val) => val || "<repository_url>" },
                { id: "directory", type: "text", label: "Directory (optional)", placeholder: "cloned-repo", template: (val) => val ? `${val}` : "" },
                { id: "branchName", type: "text", label: "Specific branch (-b)", placeholder: "develop", template: (val) => val ? `-b ${val}` : "" },
                { id: "depth", type: "number", label: "Shallow clone depth (--depth)", placeholder: "1", template: (val) => val ? `--depth ${val}` : "" }
            ]
        },
        "git add": {
            description: "Add file contents to the index (staging area).",
            base: "git add",
            parts: [
                { id: "files", type: "text", label: "File(s) or pattern", placeholder: ".", required: true, template: (val) => val || "<file(s)/pattern>" },
                { id: "interactive", type: "checkbox", label: "Interactive patch selection (-p)", template: (checked) => checked ? "-p" : "" },
                { id: "allChanges", type: "checkbox", label: "Stage all changes (-A or --all)", template: (checked) => checked ? "-A" : "" }
            ]
        },
        "git commit": {
            description: "Record changes to the repository.",
            base: "git commit",
            parts: [
                { id: "message", type: "text", label: "Commit message (-m)", placeholder: "Your commit message", template: (val) => val ? `-m "${val.replace(/"/g, '\\"')}"` : "" },
                { id: "allStaged", type: "checkbox", label: "Stage modified/deleted files and commit (-a)", info: "Does not add new (untracked) files.", template: (checked) => checked ? "-a" : "" },
                { id: "amend", type: "checkbox", label: "Amend previous commit (--amend)", template: (checked) => checked ? "--amend" : "" },
                { id: "noEdit", type: "checkbox", label: "Use previous message with amend (--no-edit)", dependsOn: "amend", template: (checked, allValues) => (allValues.amend && checked) ? "--no-edit" : "" }
            ]
        },
        "git status": {
            description: "Show the working tree status.",
            base: "git status",
            parts: [
                { id: "short", type: "checkbox", label: "Short format (-s)", template: (checked) => checked ? "-s" : "" },
                { id: "branch", type: "checkbox", label: "Show branch and tracking info (-b or --branch)", template: (checked) => checked ? "-b" : "" },
                { id: "untrackedNo", type: "checkbox", label: "Hide untracked files (-uno)", template: (checked) => checked ? "-uno" : "" }
            ]
        },
        "git log": {
            description: "Show commit logs.",
            base: "git log",
            parts: [
                { id: "oneline", type: "checkbox", label: "One line per commit (--oneline)", template: (checked) => checked ? "--oneline" : "" },
                { id: "graph", type: "checkbox", label: "Display ASCII graph (--graph)", template: (checked) => checked ? "--graph" : "" },
                { id: "decorate", type: "checkbox", label: "Decorate refs (--decorate)", template: (checked) => checked ? "--decorate" : "" },
                { id: "all", type: "checkbox", label: "Show all branches (--all)", template: (checked) => checked ? "--all" : "" },
                { id: "count", type: "number", label: "Number of commits to show (-n)", placeholder: "10", template: (val) => val ? `-n ${val}` : "" },
                { id: "author", type: "text", label: "Filter by author (--author)", placeholder: "John Doe", template: (val) => val ? `--author="${val.replace(/"/g, '\\"')}"` : "" },
                { id: "since", type: "text", label: "Show commits more recent than a specific date (--since)", placeholder: "2 weeks ago / YYYY-MM-DD", template: (val) => val ? `--since="${val.replace(/"/g, '\\"')}"` : "" }
            ]
        }
    },
    "Branching & Merging": {
        "git branch (list)": {
            description: "List local branches. Use options to see remote or all branches.",
            base: "git branch",
            parts: [
                { id: "allBranches", type: "checkbox", label: "All branches, local and remote (-a)", template: (checked) => checked ? "-a" : "" },
                { id: "remoteBranches", type: "checkbox", label: "Remote-tracking branches (-r)", template: (checked) => checked ? "-r" : "" },
                { id: "verbose", type: "checkbox", label: "Show SHA and commit subject (-v)", template: (checked) => checked ? "-v" : "" }
            ]
        },
        "git branch <new-branch> (create)": {
            description: "Create a new branch pointing to the current HEAD.",
            base: "git branch",
            parts: [
                { id: "newBranchName", type: "text", label: "New branch name", placeholder: "feature/new-idea", required: true, template: (val) => val || "<new-branch-name>" },
                { id: "startPoint", type: "text", label: "Start point (commit or branch, optional)", placeholder: "main or commit-hash", template: (val) => val || "" }
            ]
        },
        "git branch -m <new-name> (rename)": {
            description: "Rename a branch.",
            base: "git branch",
            parts: [
                { id: "oldName", type: "text", label: "Old branch name (optional, current if blank)", placeholder: "old-feature-name", template: (val) => val || "" },
                { id: "newName", type: "text", label: "New branch name", placeholder: "new-feature-name", required: true, template: (val) => val ? `-m ${val}` : "-m <new-name>" }
            ]
        },
        "git branch -d/-D <branch> (delete)": {
            description: "Delete a local branch. Use -D to force delete.",
            base: "git branch",
            parts: [
                {
                    id: "forceDelete", type: "checkbox", label: "Force delete (-D instead of -d)",
                    template: (checked) => checked ? "-D" : "-d"
                },
                { id: "branchName", type: "text", label: "Branch to delete", placeholder: "stale-branch", required: true, template: (val) => val || "<branch-name>" }
            ]
        },
        "git checkout": {
            description: "Switch branches or restore working tree files.",
            base: "git checkout",
            parts: [
                { id: "branchName", type: "text", label: "Branch name or commit", placeholder: "feature-branch or commit-hash", template: (val) => val || "<branch/commit>" },
                { id: "newBranch", type: "checkbox", label: "Create new branch (-b) and switch", template: (checked) => checked ? "-b" : "" },
                { id: "filePath", type: "text", label: "File(s) to discard changes (use with '--')", placeholder: "path/to/file.txt", template: (val) => val ? `-- ${val}` : "" }
            ],
            note: "To create and switch to a new branch, provide a name in 'Branch name or commit' and check '-b'. To discard file changes, provide 'File(s) to discard changes'."
        },
        "git merge <branch>": {
            description: "Join two or more development histories together (typically the specified branch into current branch).",
            base: "git merge",
            parts: [
                { id: "branchToMerge", type: "text", label: "Branch to merge", placeholder: "develop", required: true, template: (val) => val || "<branch-name>" },
                { id: "noFastForward", type: "checkbox", label: "Create merge commit even if fast-forward is possible (--no-ff)", template: (checked) => checked ? "--no-ff" : "" },
                { id: "squash", type: "checkbox", label: "Squash commits and create a single commit (--squash)", template: (checked) => checked ? "--squash" : "" },
                { id: "abort", type: "checkbox", label: "Abort a merge in progress (--abort)", template: (checked) => checked ? "--abort" : "", exclusive: true }
            ]
        },
        "git rebase <base>": {
            description: "Reapply commits on top of another base tip.",
            base: "git rebase",
            parts: [
                { id: "upstreamBranch", type: "text", label: "Upstream branch (base)", placeholder: "main", required: true, template: (val) => val || "<base-branch>" },
                { id: "interactive", type: "checkbox", label: "Interactive rebase (-i)", template: (checked) => checked ? "-i" : "" },
                { id: "abort", type: "checkbox", label: "Abort rebase (--abort)", template: (checked) => checked ? "--abort" : "", exclusive: true },
                { id: "continue", type: "checkbox", label: "Continue rebase (--continue)", template: (checked) => checked ? "--continue" : "", exclusive: true },
                { id: "skip", type: "checkbox", label: "Skip current patch (--skip)", template: (checked) => checked ? "--skip" : "", exclusive: true }
            ]
        }
    },
    "Remote Operations": {
        "git remote add <name> <url>": {
            description: "Add a new remote repository.",
            base: "git remote add",
            parts: [
                { id: "remoteName", type: "text", label: "Remote name", placeholder: "origin", required: true, template: (val) => val || "<name>" },
                { id: "remoteUrl", type: "text", label: "Remote URL", placeholder: "https://github.com/user/repo.git", required: true, template: (val) => val || "<url>" }
            ]
        },
        "git remote -v": {
            description: "Show all configured remote repositories with their URLs.",
            base: "git remote -v",
            parts: []
        },
        "git remote show <name>": {
            description: "Show information about a specific remote.",
            base: "git remote show",
            parts: [
                { id: "remoteName", type: "text", label: "Remote name", placeholder: "origin", required: true, template: (val) => val || "<name>" }
            ]
        },
        "git fetch <remote>": {
            description: "Download objects and refs from another repository.",
            base: "git fetch",
            parts: [
                { id: "remoteName", type: "text", label: "Remote name (optional, 'origin' if blank)", placeholder: "origin", template: (val) => val || "" },
                { id: "prune", type: "checkbox", label: "Prune stale remote-tracking branches (--prune)", template: (checked) => checked ? "--prune" : "" },
                { id: "allRemotes", type: "checkbox", label: "Fetch all remotes (--all)", template: (checked) => checked ? "--all" : "" }
            ]
        },
        "git pull <remote> <branch>": {
            description: "Fetch from and integrate with another repository or a local branch.",
            base: "git pull",
            parts: [
                { id: "remoteName", type: "text", label: "Remote name (optional)", placeholder: "origin", template: (val) => val || "" },
                { id: "branchName", type: "text", label: "Branch name (optional)", placeholder: "main", template: (val) => val || "" },
                { id: "rebase", type: "checkbox", label: "Rebase instead of merge (--rebase)", template: (checked) => checked ? "--rebase" : "" },
                { id: "autostash", type: "checkbox", label: "Automatically stash and apply (--autostash)", template: (checked) => checked ? "--autostash" : "" }
            ]
        },
        "git push <remote> <branch>": {
            description: "Update remote refs along with associated objects.",
            base: "git push",
            parts: [
                { id: "remoteName", type: "text", label: "Remote name", placeholder: "origin", template: (val) => val || "<remote>" },
                { id: "branchName", type: "text", label: "Branch name", placeholder: "main or current branch", template: (val) => val || "<branch>" },
                { id: "setUpstream", type: "checkbox", label: "Set upstream for current branch (-u or --set-upstream)", template: (checked) => checked ? "-u" : "" },
                { id: "force", type: "checkbox", label: "Force push (--force)", info: "Use with caution!", template: (checked) => checked ? "--force" : "" },
                { id: "forceWithLease", type: "checkbox", label: "Force push with lease (--force-with-lease)", info: "Safer force push.", template: (checked) => checked ? "--force-with-lease" : "" },
                { id: "tags", type: "checkbox", label: "Push all tags (--tags)", template: (checked) => checked ? "--tags" : "" },
                { id: "deleteRemoteBranch", type: "text", label: "Delete remote branch (--delete)", placeholder: "old-feature", template: (val) => val ? `--delete ${val}` : "" }
            ]
        }
    },
    "Stashing": {
        "git stash": {
            description: "Stash changes in a dirty working directory away. Default action is 'push'.",
            base: "git stash",
            parts: [
                {
                    id: "stashSubcommand", type: "select", label: "Action", required: false, // 'push' is default if no subcommand
                    choices: [
                        { value: "", text: "push (default) - Stash your changes" },
                        { value: "list", text: "list - List stashed changes" },
                        { value: "show", text: "show - Show changes recorded in a stash" },
                        { value: "pop", text: "pop - Apply stash and remove from list" },
                        { value: "apply", text: "apply - Apply stash but keep in list" },
                        { value: "drop", text: "drop - Remove a stash entry" },
                        { value: "clear", text: "clear - Remove all stash entries" },
                        { value: "branch", text: "branch <branchname> <stash> - Create branch from stash" }
                    ],
                    template: (val) => val || "" // 'push' is implicit if no subcommand
                },
                { id: "stashMessage", type: "text", label: "Message (for push, -m)", placeholder: "WIP on feature X",
                  condition: (allValues) => !allValues.stashSubcommand || allValues.stashSubcommand === "", // only for implicit or explicit push
                  template: (val, allValues) => (!allValues.stashSubcommand && val) ? `push -m "${val.replace(/"/g, '\\"')}"` : ""
                },
                 { id: "stashIndex", type: "text", label: "Stash reference (for show, pop, apply, drop, branch)", placeholder: "stash@{0}",
                  condition: (allValues) => ["show", "pop", "apply", "drop", "branch"].includes(allValues.stashSubcommand),
                  template: (val, allValues) => (["show", "pop", "apply", "drop", "branch"].includes(allValues.stashSubcommand) && val) ? val : ""
                },
                { id: "newBranchForStash", type: "text", label: "New branch name (for stash branch)", placeholder: "feature-from-stash",
                  condition: (allValues) => allValues.stashSubcommand === "branch",
                  template: (val, allValues) => (allValues.stashSubcommand === "branch" && val) ? val : (allValues.stashSubcommand === "branch" ? "<new-branch-name>" : "")
                },
                { id: "includeUntracked", type: "checkbox", label: "Include untracked files (-u or --include-untracked, for push)",
                  condition: (allValues) => !allValues.stashSubcommand || allValues.stashSubcommand === "",
                  template: (checked, allValues) => (!allValues.stashSubcommand && checked) ? (allValues.stashMessage ? "" : "push") + " -u" : "" // Add push if no message
                }
            ],
            note: "If 'Action' is 'push' (default) and 'Message' is provided, '-m' is added. Stash reference is needed for pop, apply, drop, show, branch. For 'stash branch', provide new branch name and stash reference."
        }
    },
    "Tagging": {
        "git tag (list/create)": {
            description: "Create, list, or manage tags. Leaving tag name empty lists tags.",
            base: "git tag",
            parts: [
                { id: "tagName", type: "text", label: "Tag name (optional, lists tags if empty)", placeholder: "v1.0.0", template: (val) => val || "" },
                { id: "annotated", type: "checkbox", label: "Create an annotated tag (-a)", template: (checked) => checked ? "-a" : "" },
                { id: "message", type: "text", label: "Tag message (-m, for annotated tags)", placeholder: "Release version 1.0.0",
                  dependsOn: "annotated",
                  template: (val, allValues) => (allValues.annotated && val) ? `-m "${val.replace(/"/g, '\\"')}"` : ""
                },
                { id: "commitOrObject", type: "text", label: "Specific commit or object to tag (optional)", placeholder: "commit-hash", template: (val) => val || "" },
                { id: "listPattern", type: "text", label: "List tags matching pattern (-l)", placeholder: "v1.*", template: (val) => val ? `-l "${val.replace(/"/g, '\\"')}"` : "" }
            ]
        },
        "git tag -d <tagname> (delete)": {
            description: "Delete a local tag.",
            base: "git tag -d",
            parts: [
                { id: "tagToDelete", type: "text", label: "Tag name to delete", placeholder: "v0.9-alpha", required: true, template: (val) => val || "<tagname>" }
            ]
        }
    },
    "GitHub CLI - Auth & Config": {
        "gh auth login": {
            description: "Authenticate with a GitHub host.",
            base: "gh auth login",
            parts: [
                { id: "hostname", type: "text", label: "Hostname (-h)", placeholder: "github.com", template: (val) => val ? `-h ${val}` : "" },
                { id: "scopes", type: "text", label: "Scopes (-s)", placeholder: "repo,gist", template: (val) => val ? `-s ${val}` : "" },
                { id: "web", type: "checkbox", label: "Open web browser to authenticate (-w)", template: (checked) => checked ? "-w" : "" },
                { id: "gitProtocol", type: "select", label: "Git protocol (--git-protocol)", choices: [{value:"", text:"Default"}, {value:"ssh", text:"SSH"}, {value:"https", text:"HTTPS"}], template: (val) => val ? `--git-protocol ${val}`: "" },
                { id: "withToken", type: "text", label: "Read token from stdin (--with-token)", placeholder: "PASTE_TOKEN_HERE (then press Enter)", template: (val) => val ? `--with-token` : "" }
            ],
            note: "If using --with-token, paste the token when prompted in the terminal, not here."
        },
        "gh auth status": {
            description: "View authentication status.",
            base: "gh auth status",
            parts: [
                 { id: "hostname", type: "text", label: "Hostname (-h)", placeholder: "github.com", template: (val) => val ? `-h ${val}` : "" },
                 { id: "showToken", type: "checkbox", label: "Display token (--show-token)", template: (checked) => checked ? "--show-token" : "" }
            ]
        },
        "gh config list": {
            description: "Print a list of configuration keys and values.",
            base: "gh config list",
            parts: [
                { id: "hostname", type: "text", label: "Hostname (-h)", placeholder: "github.com", template: (val) => val ? `-h ${val}` : "" }
            ]
        },
        "gh config get <key>": {
            description: "Print the value of a given configuration key.",
            base: "gh config get",
            parts: [
                { id: "key", type: "text", label: "Key", placeholder: "git_protocol", required: true, template: (val) => val || "<key>" },
                { id: "hostname", type: "text", label: "Hostname (-h)", placeholder: "github.com", template: (val) => val ? `-h ${val}` : "" }
            ]
        },
        "gh config set <key> <value>": {
            description: "Update the configuration with a new value for the given key.",
            base: "gh config set",
            parts: [
                { id: "key", type: "text", label: "Key", placeholder: "git_protocol", required: true, template: (val) => val || "<key>" },
                { id: "value", type: "text", label: "Value", placeholder: "https", required: true, template: (val) => val || "<value>" },
                { id: "hostname", type: "text", label: "Hostname (-h)", placeholder: "github.com", template: (val) => val ? `-h ${val}` : "" }
            ]
        }
    },
    "GitHub CLI - Repos": {
        "gh repo clone <repository>": {
            description: "Clone a GitHub repository locally. Supports OWNER/REPO format.",
            base: "gh repo clone",
            parts: [
                { id: "repository", type: "text", label: "Repository (OWNER/REPO or URL)", placeholder: "owner/repo-name", required: true, template: (val) => val || "<repository>" },
                { id: "directory", type: "text", label: "Directory to clone into (optional)", placeholder: "my-cloned-repo", template: (val) => val ? `${val}` : "" },
                // gh repo clone inherits git clone options like -- -b <branch>, --depth <depth>
                { id: "gitArgs", type: "text", label: "Additional git clone arguments (prefix with --)", placeholder: "-- -b main --depth 1", template: (val) => val || "" }
            ]
        },
        "gh repo create <name>": {
            description: "Create a new GitHub repository.",
            base: "gh repo create",
            parts: [
                { id: "repoName", type: "text", label: "Repository name (optional, prompts if empty)", placeholder: "new-awesome-project", template: (val) => val || "" },
                { id: "description", type: "text", label: "Description (--description)", placeholder: "My awesome project", template: (val) => val ? `--description "${val.replace(/"/g, '\\"')}"` : "" },
                { id: "homepage", type: "text", label: "Homepage URL (--homepage)", placeholder: "https://example.com", template: (val) => val ? `--homepage ${val}` : "" },
                {
                    id: "visibility", type: "select", label: "Visibility",
                    choices: [
                        { value: "", text: "Default (private or user preference)" },
                        { value: "--public", text: "Public" },
                        { value: "--private", text: "Private" },
                        { value: "--internal", text: "Internal (for GitHub Enterprise)" }
                    ],
                    template: (val) => val || ""
                },
                { id: "team", type: "text", label: "Team to grant access (--team)", placeholder: "my-org/developers", template: (val) => val ? `--team ${val}` : "" },
                { id: "templateRepo", type: "text", label: "Template repository (--template)", placeholder: "owner/template-repo", template: (val) => val ? `--template ${val}` : "" },
                { id: "source", type: "text", label: "Path to local repo to push (--source)", placeholder: ".", template: (val) => val ? `--source ${val}` : "" },
                { id: "push", type: "checkbox", label: "Push local commits after creating (--push, requires --source)", dependsOn: "source", template: (checked, allVals) => (allVals.source && checked) ? "--push" : "" },
                { id: "addReadme", type: "checkbox", label: "Add a README file (--add-readme)", template: (checked) => checked ? "--add-readme" : "" },
                { id: "gitignore", type: "text", label: "Gitignore template (--gitignore)", placeholder: "Node", template: (val) => val ? `--gitignore ${val}` : "" },
                { id: "license", type: "text", label: "License template (--license)", placeholder: "mit", template: (val) => val ? `--license ${val}` : "" }
            ]
        },
        "gh repo list [owner]": {
            description: "List repositories for an owner or the authenticated user.",
            base: "gh repo list",
            parts: [
                { id: "owner", type: "text", label: "Owner (organization or user, optional)", placeholder: "github or my-org", template: (val) => val || "" },
                { id: "limit", type: "number", label: "Limit (-L)", placeholder: "30", template: (val) => val ? `-L ${val}` : "" },
                {
                    id: "visibilityType", type: "select", label: "Visibility",
                    choices: [ {value:"", text:"All"}, {value:"public", text:"Public"}, {value:"private", text:"Private"}, {value:"internal", text:"Internal"} ],
                    template: (val) => val ? `--${val}` : ""
                },
                 { id: "forks", type: "checkbox", label: "Include forks (--fork)", template: (checked) => checked ? "--fork" : "" },
                 { id: "archived", type: "checkbox", label: "Include archived (--archived)", template: (checked) => checked ? "--archived" : "" },
                 { id: "json", type: "text", label: "Output JSON (--json fields)", placeholder: "name,url", template: (val) => val ? `--json ${val}` : "" }
            ]
        },
        "gh repo view [repository]": {
            description: "View a GitHub repository. Opens in browser by default if no flags.",
            base: "gh repo view",
            parts: [
                 { id: "repository", type: "text", label: "Repository (OWNER/REPO, optional, uses current)", placeholder: "owner/repo", template: (val) => val || "" },
                 { id: "web", type: "checkbox", label: "Open in browser (-w or --web)", template: (checked) => checked ? "-w" : "" },
                 { id: "branch", type: "text", label: "Branch (-b or --branch)", placeholder: "main", template: (val) => val ? `-b ${val}` : "" },
                 { id: "jq", type: "text", label: "Filter JSON output using a jq expression (--jq)", placeholder: ".name", template: (val) => val ? `--jq "${val}"` : "" },
                 { id: "json", type: "text", label: "Output JSON (--json fields)", placeholder: "name,description", template: (val) => val ? `--json ${val}` : "" }
            ]
        }
    },
    "GitHub CLI - PRs": {
        "gh pr list": {
            description: "List pull requests in a repository.",
            base: "gh pr list",
            parts: [
                { id: "limit", type: "number", label: "Limit (-L)", placeholder: "30", template: (val) => val ? `-L ${val}` : "" },
                {
                    id: "state", type: "select", label: "State (-s)",
                    choices: [
                        { value: "open", text: "Open" }, { value: "closed", text: "Closed" },
                        { value: "merged", text: "Merged" }, { value: "all", text: "All" }
                    ],
                    template: (val) => val ? `-s ${val}` : "-s open" // Default to open
                },
                { id: "author", type: "text", label: "Filter by author (-a)", placeholder: "@me or username", template: (val) => val ? `-a ${val}` : "" },
                { id: "baseBranch", type: "text", label: "Filter by base branch (-B)", placeholder: "main", template: (val) => val ? `-B ${val}` : "" },
                { id: "headBranch", type: "text", label: "Filter by head branch (-H)", placeholder: "feature-branch", template: (val) => val ? `-H ${val}` : "" },
                { id: "label", type: "text", label: "Filter by label (-l)", placeholder: "bug,enhancement", template: (val) => val ? `-l "${val}"` : "" }, // Commas for multiple
                { id: "web", type: "checkbox", label: "Open in web browser (-w)", template: (checked) => checked ? "-w" : "" },
                { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        },
        "gh pr create": {
            description: "Create a pull request on GitHub.",
            base: "gh pr create",
            parts: [
                { id: "title", type: "text", label: "Title (-t)", placeholder: "My awesome PR", template: (val) => val ? `-t "${val.replace(/"/g, '\\"')}"` : "" },
                { id: "body", type: "textarea", label: "Body (-b)", placeholder: "Detailed description of changes...", template: (val) => val ? `-b "${val.replace(/"/g, '\\"')}"` : "" },
                { id: "baseBranch", type: "text", label: "Base branch (-B)", placeholder: "main", template: (val) => val ? `-B ${val}` : "" },
                { id: "headBranch", type: "text", label: "Head branch (-H, current if blank)", placeholder: "my-feature-branch", template: (val) => val ? `-H ${val}` : "" },
                { id: "web", type: "checkbox", label: "Open in web browser after creation (-w)", template: (checked) => checked ? "-w" : "" },
                { id: "draft", type: "checkbox", label: "Mark as draft (--draft)", template: (checked) => checked ? "--draft" : "" },
                { id: "fill", type: "checkbox", label: "Use commit log to prefill title and body (--fill)", template: (checked) => checked ? "--fill" : "" },
                { id: "assignee", type: "text", label: "Assignee (--assignee)", placeholder: "@me or username(s), comma-separated", template: (val) => val ? `--assignee "${val}"` : "" },
                { id: "label", type: "text", label: "Labels (--label)", placeholder: "bug,docs (comma-separated)", template: (val) => val ? `--label "${val}"` : "" },
                { id: "project", type: "text", label: "Project (--project)", placeholder: "Project Name", template: (val) => val ? `--project "${val}"` : "" },
                { id: "milestone", type: "text", label: "Milestone (--milestone)", placeholder: "v1.0", template: (val) => val ? `--milestone "${val}"` : "" },
                { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        },
        "gh pr checkout <pr>": {
            description: "Check out a pull request locally.",
            base: "gh pr checkout",
            parts: [
                { id: "prNumberOrUrl", type: "text", label: "PR number, URL, or branch name", placeholder: "123 or https://github.com/owner/repo/pull/123", required: true, template: (val) => val || "<pr-identifier>" },
                { id: "branchName", type: "text", label: "Local branch name (optional, -b)", placeholder: "checkout-pr-123", template: (val) => val ? `-b ${val}` : "" },
                { id: "force", type: "checkbox", label: "Force checkout, even if local branch has unmerged changes (--force)", template: (checked) => checked ? "--force" : "" },
                { id: "recurseSubmodules", type: "checkbox", label: "Update submodules (--recurse-submodules)", template: (checked) => checked ? "--recurse-submodules" : "" },
                { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        },
        "gh pr view [pr]": {
            description: "View a pull request. Opens in browser by default if no flags and PR number provided.",
            base: "gh pr view",
            parts: [
                 { id: "prNumberUrlBranch", type: "text", label: "PR number, URL, or branch name (optional, current branch if PR exists)", placeholder: "123", template: (val) => val || "" },
                 { id: "web", type: "checkbox", label: "Open in browser (-w or --web)", template: (checked) => checked ? "-w" : "" },
                 { id: "comments", type: "checkbox", label: "View PR comments (--comments)", template: (checked) => checked ? "--comments" : "" },
                 { id: "jq", type: "text", label: "Filter JSON output using a jq expression (--jq)", placeholder: ".title", template: (val) => val ? `--jq "${val}"` : "" },
                 { id: "json", type: "text", label: "Output JSON (--json fields)", placeholder: "title,author", template: (val) => val ? `--json ${val}` : "" },
                 { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        },
        "gh pr status": {
            description: "Show status of relevant pull requests.",
            base: "gh pr status",
            parts: [
                 { id: "jq", type: "text", label: "Filter JSON output using a jq expression (--jq)", placeholder: ".currentBranch.title", template: (val) => val ? `--jq "${val}"` : "" },
                 { id: "json", type: "text", label: "Output JSON (--json fields)", placeholder: "currentBranch,createdByMe", template: (val) => val ? `--json ${val}` : "" },
                 { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        }
    },
    "GitHub CLI - Issues": {
        "gh issue list": {
            description: "List issues in a repository.",
            base: "gh issue list",
            parts: [
                { id: "limit", type: "number", label: "Limit (-L)", placeholder: "30", template: (val) => val ? `-L ${val}` : "" },
                {
                    id: "state", type: "select", label: "State (-s)",
                    choices: [
                        { value: "open", text: "Open" }, { value: "closed", text: "Closed" }, { value: "all", text: "All" }
                    ],
                    template: (val) => val ? `-s ${val}` : "-s open"
                },
                { id: "author", type: "text", label: "Filter by author (-a)", placeholder: "@me or username", template: (val) => val ? `-a ${val}` : "" },
                { id: "assignee", type: "text", label: "Filter by assignee", placeholder: "@me or username", template: (val) => val ? `--assignee ${val}` : "" },
                { id: "label", type: "text", label: "Filter by label (-l)", placeholder: "bug,docs (comma-separated)", template: (val) => val ? `-l "${val}"` : "" },
                { id: "web", type: "checkbox", label: "Open in web browser (-w)", template: (checked) => checked ? "-w" : "" },
                { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        },
        "gh issue create": {
            description: "Create an issue on GitHub.",
            base: "gh issue create",
            parts: [
                { id: "title", type: "text", label: "Title (-t)", placeholder: "Issue Title", template: (val) => val ? `-t "${val.replace(/"/g, '\\"')}"` : "" },
                { id: "body", type: "textarea", label: "Body (-b)", placeholder: "Detailed description of the issue...", template: (val) => val ? `-b "${val.replace(/"/g, '\\"')}"` : "" },
                { id: "web", type: "checkbox", label: "Open in web browser after creation (-w)", template: (checked) => checked ? "-w" : "" },
                { id: "assignee", type: "text", label: "Assignee (--assignee)", placeholder: "@me or username(s), comma-separated", template: (val) => val ? `--assignee "${val}"` : "" },
                { id: "label", type: "text", label: "Labels (--label)", placeholder: "bug,enhancement (comma-separated)", template: (val) => val ? `--label "${val}"` : "" },
                { id: "project", type: "text", label: "Project (--project)", placeholder: "Project Name", template: (val) => val ? `--project "${val}"` : "" },
                { id: "milestone", type: "text", label: "Milestone (--milestone)", placeholder: "v1.0", template: (val) => val ? `--milestone "${val}"` : "" },
                { id: "recover", type: "text", label: "Recover input from a failed run of create (--recover)", placeholder: "issue_12345.md", template: (val) => val ? `--recover ${val}` : "" },
                { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        },
        "gh issue view <issue>": {
            description: "View an issue. Opens in browser by default if no flags and issue number provided.",
            base: "gh issue view",
            parts: [
                 { id: "issueNumberUrl", type: "text", label: "Issue number or URL", placeholder: "456 or https://github.com/owner/repo/issues/456", template: (val) => val || "" },
                 { id: "web", type: "checkbox", label: "Open in browser (-w or --web)", template: (checked) => checked ? "-w" : "" },
                 { id: "comments", type: "checkbox", label: "View issue comments (--comments)", template: (checked) => checked ? "--comments" : "" },
                 { id: "jq", type: "text", label: "Filter JSON output using a jq expression (--jq)", placeholder: ".title", template: (val) => val ? `--jq "${val}"` : "" },
                 { id: "json", type: "text", label: "Output JSON (--json fields)", placeholder: "title,author", template: (val) => val ? `--json ${val}` : "" },
                 { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        },
        "gh issue status": {
            description: "Show status of relevant issues.",
            base: "gh issue status",
             parts: [
                 { id: "jq", type: "text", label: "Filter JSON output using a jq expression (--jq)", placeholder: ". Nā ", template: (val) => val ? `--jq "${val}"` : "" },
                 { id: "json", type: "text", label: "Output JSON (--json fields)", placeholder: " Nā ", template: (val) => val ? `--json ${val}` : "" },
                 { id: "repo", type: "text", label: "Repository (OWNER/REPO) (--repo)", placeholder: "owner/repo", template: (val) => val ? `--repo ${val}` : "" }
            ]
        }
    }
};

document.addEventListener('DOMContentLoaded', () => {
    const categorySelect = document.getElementById('category-select');
    const commandSelect = document.getElementById('command-select');
    const commandInfoPlaceholder = document.getElementById('command-info-placeholder');
    const commandDescriptionContainer = document.getElementById('command-description-container');
    const commandTitleEl = document.getElementById('command-title');
    const commandDescriptionEl = document.getElementById('command-description');
    const commandOptionsContainer = document.getElementById('command-options-container');
    const generatedCommandContainer = document.getElementById('generated-command-container');
    const generatedCommandEl = document.getElementById('generated-command');
    const copyCommandButton = document.getElementById('copy-command-button');
    const copyFeedbackEl = document.getElementById('copy-feedback');

    let currentCommandData = null;
    let currentCommandParts = [];

    function populateCategories() {
        Object.keys(commandsData).forEach(category => {
            const option = document.createElement('option');
            option.value = category;
            option.textContent = category;
            categorySelect.appendChild(option);
        });
    }

    function populateCommands(categoryKey) {
        commandSelect.innerHTML = '<option value="">-- Select Command --</option>';
        if (categoryKey && commandsData[categoryKey]) {
            Object.keys(commandsData[categoryKey]).forEach(commandName => {
                const option = document.createElement('option');
                option.value = commandName;
                option.textContent = commandName;
                commandSelect.appendChild(option);
            });
        }
    }

    function renderCommandUI(categoryKey, commandKey) {
        currentCommandData = commandsData[categoryKey]?.[commandKey];
        commandOptionsContainer.innerHTML = ''; // Clear previous options
        currentCommandParts = [];

        if (!currentCommandData) {
            commandDescriptionContainer.classList.add('hidden');
            commandOptionsContainer.classList.add('hidden');
            generatedCommandContainer.classList.add('hidden');
            commandInfoPlaceholder.classList.remove('hidden');
            generatedCommandEl.textContent = '';
            return;
        }

        commandInfoPlaceholder.classList.add('hidden');
        commandDescriptionContainer.classList.remove('hidden');
        commandOptionsContainer.classList.remove('hidden');
        generatedCommandContainer.classList.remove('hidden');

        commandTitleEl.textContent = commandKey;
        let descriptionText = currentCommandData.description;
        if (currentCommandData.note) {
            descriptionText += ` <br><strong>Note:</strong> ${currentCommandData.note}`;
        }
        commandDescriptionEl.innerHTML = descriptionText;


        currentCommandParts = currentCommandData.parts.map(part => {
            const optionId = `option-${part.id}`;
            const wrapper = document.createElement('div');
            wrapper.classList.add('option-item');
            if (part.condition) { // Initially hide conditional parts
                 wrapper.classList.add('hidden');
            }

            const label = document.createElement('label');
            label.setAttribute('for', optionId);
            label.classList.add('option-label');
            label.textContent = part.label + (part.required ? ' *' : '');
             if (part.info) {
                const infoSpan = document.createElement('span');
                infoSpan.classList.add('text-xs', 'text-gray-500', 'ml-2', 'font-normal');
                infoSpan.textContent = `(${part.info})`;
                label.appendChild(infoSpan);
            }


            let inputElement;

            switch (part.type) {
                case 'checkbox':
                    wrapper.classList.add('flex', 'items-center');
                    inputElement = document.createElement('input');
                    inputElement.type = 'checkbox';
                    inputElement.id = optionId;
                    inputElement.classList.add('checkbox-input');
                    label.classList.remove('option-label'); // Use default label styling for checkbox
                    label.classList.add('checkbox-label', 'ml-2'); // Adjust label for checkbox
                    label.insertBefore(inputElement, label.firstChild); // Input before text for checkbox
                    break;
                case 'select':
                    inputElement = document.createElement('select');
                    inputElement.id = optionId;
                    inputElement.classList.add('input-field');
                    part.choices.forEach(choice => {
                        const opt = document.createElement('option');
                        opt.value = choice.value;
                        opt.textContent = choice.text;
                        inputElement.appendChild(opt);
                    });
                    wrapper.appendChild(label);
                    wrapper.appendChild(inputElement);
                    break;
                case 'textarea':
                    inputElement = document.createElement('textarea');
                    inputElement.id = optionId;
                    inputElement.placeholder = part.placeholder || '';
                    inputElement.classList.add('input-field');
                    wrapper.appendChild(label);
                    wrapper.appendChild(inputElement);
                    break;
                default: // text, number
                    inputElement = document.createElement('input');
                    inputElement.type = part.type;
                    inputElement.id = optionId;
                    inputElement.placeholder = part.placeholder || '';
                    inputElement.classList.add('input-field');
                    if (part.type === 'number' && part.min !== undefined) inputElement.min = part.min;
                    if (part.type === 'number' && part.step !== undefined) inputElement.step = part.step;
                    wrapper.appendChild(label);
                    wrapper.appendChild(inputElement);
            }
            
            if (part.type === 'checkbox') {
                wrapper.appendChild(label); // Label wraps checkbox for better clickability
            }


            inputElement.addEventListener('input', updateGeneratedCommand);
            inputElement.addEventListener('change', updateGeneratedCommand); // For select and checkbox

            commandOptionsContainer.appendChild(wrapper);
            return { ...part, elementId: optionId, wrapperElement: wrapper }; // Store reference to wrapper for conditional visibility
        });
        updateGeneratedCommand(); // Initial command generation
    }

    function updateGeneratedCommand() {
        if (!currentCommandData) {
            generatedCommandEl.textContent = '';
            return;
        }

        let commandString = currentCommandData.base;
        const allValues = {};

        // First pass to get all current values
        currentCommandParts.forEach(part => {
            const inputEl = document.getElementById(part.elementId);
            if (inputEl) {
                allValues[part.id] = part.type === 'checkbox' ? inputEl.checked : inputEl.value;
            }
        });

        // Second pass to update visibility and build command string
        let exclusiveOptionSelected = false;
        if (currentCommandData.parts.some(p => p.exclusive)) {
             currentCommandParts.forEach(part => {
                if (part.exclusive && allValues[part.id]) {
                    exclusiveOptionSelected = true;
                }
            });
        }


        currentCommandParts.forEach(part => {
            const inputEl = document.getElementById(part.elementId);
            if (!inputEl) return;

            // Handle conditional visibility based on dependencies
            if (part.dependsOn) {
                const dependencyValue = allValues[part.dependsOn];
                const meetsCondition = dependencyValue === true || (typeof dependencyValue === 'string' && dependencyValue !== '');
                part.wrapperElement.classList.toggle('hidden', !meetsCondition);
                if (!meetsCondition) return; // Don't process template if hidden due to dependency
            }
            // Handle general conditions
            if (part.condition) {
                const meetsCondition = part.condition(allValues);
                part.wrapperElement.classList.toggle('hidden', !meetsCondition);
                 if (!meetsCondition) return;
            }


            let value = part.type === 'checkbox' ? inputEl.checked : inputEl.value;
            
            if (part.exclusive && exclusiveOptionSelected && !value) {
                // If an exclusive option is selected, and this is another exclusive option that's not selected, skip it.
                return;
            }
            if (part.exclusive && value) { // If this exclusive option is selected
                 // Disable other inputs if this exclusive option is active
            }


            const segment = part.template(value, allValues);
            if (segment) {
                 if (commandString === currentCommandData.base && currentCommandData.base.slice(-1) !== " " && segment.slice(0,1) !== " ") {
                     commandString += " ";
                 } else if (commandString.slice(-1) !== " " && segment.slice(0,1) !== " " && segment.length > 0) {
                    commandString += " ";
                 }
                 commandString += segment.trim() === segment ? segment : segment.trimStart(); // Avoid double spaces if segment already has leading/trailing
                 if (commandString.slice(-1) !== " " && segment.slice(-1) === " ") {
                    // If segment ends with space, ensure commandString has it.
                 } else if (commandString.slice(-1) !== " " && segment.slice(-1) !== " " && segment.length > 0) {
                    // If neither ends with space, and segment added, add a space for next segment (unless it's the very end)
                    // This will be handled by the next segment's logic or final trim.
                 }
            }
        });
        // Smart join/trimming logic
        generatedCommandEl.textContent = commandString.split(' ').filter(s => s).join(' ');
    }


    copyCommandButton.addEventListener('click', () => {
        navigator.clipboard.writeText(generatedCommandEl.textContent)
            .then(() => {
                copyFeedbackEl.textContent = 'Copied to clipboard!';
                copyCommandButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                copyCommandButton.classList.add('bg-green-500');
                copyCommandButton.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Copied!`;
                setTimeout(() => {
                    copyFeedbackEl.textContent = '';
                    copyCommandButton.classList.remove('bg-green-500');
                    copyCommandButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                    copyCommandButton.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                            <path d="M3 5a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2-1a1 1 0 00-1 1v8a1 1 0 001 1h6a1 1 0 001-1V5a1 1 0 00-1-1H5z" />
                        </svg>
                        Copy`;
                }, 2000);
            })
            .catch(err => {
                copyFeedbackEl.textContent = 'Failed to copy!';
                console.error('Failed to copy: ', err);
                setTimeout(() => copyFeedbackEl.textContent = '', 2000);
            });
    });

    categorySelect.addEventListener('change', (e) => {
        const categoryKey = e.target.value;
        populateCommands(categoryKey);
        // Reset command UI when category changes
        renderCommandUI(null, null);
    });

    commandSelect.addEventListener('change', (e) => {
        const commandKey = e.target.value;
        const categoryKey = categorySelect.value;
        renderCommandUI(categoryKey, commandKey);
    });

    // Initialize
    populateCategories();
});
</script>

</body>
</html>
